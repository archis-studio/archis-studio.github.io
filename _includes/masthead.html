<!-- 
  Custom Masthead - Pixel Art + Future Space Theme
  Navigation with retro gaming & space aesthetics
-->
<div class="masthead">
  <!-- Starfield background -->
  <div class="masthead__starfield" aria-hidden="true"></div>
  
  <!-- Scanline effect -->
  <div class="masthead__scanline" aria-hidden="true"></div>
  
  <div class="masthead__inner-wrap">
    <!-- Logo & Brand -->
    <div class="masthead__brand">
      <a class="site-logo" href="{{ '/' | relative_url }}">
        <!-- Pixel Rocket Icon -->
        <div class="pixel-icon" aria-hidden="true">
          <span class="pixel-icon__rocket"></span>
        </div>
        
        <div class="site-branding">
          <span class="site-title">ARCHIS.STUDIO</span>
          <span class="site-tagline">DIGITAL¬∑COMPASS</span>
        </div>
      </a>
    </div>

    <!-- Navigation Menu -->
    <nav class="masthead__menu" role="navigation">
      <ul class="nav-links">
        {%- for link in site.data.navigation.main -%}
          <li class="nav-item">
            <a href="{{ link.url | relative_url }}" 
               class="nav-link"
               {% if link.description %}title="{{ link.description }}"{% endif %}>
              <span class="nav-link__text">{{ link.title }}</span>
            </a>
          </li>
        {%- endfor -%}
      </ul>
    </nav>

    <!-- Action Buttons -->
    <div class="masthead__actions">
      <button class="action-btn search-toggle" type="button" aria-label="ÊêúÂ∞ã" title="ÊêúÂ∞ã">
        <span class="action-btn__icon">üîç</span>
      </button>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-toggle" type="button" aria-label="ÈÅ∏ÂñÆ" aria-expanded="false">
      <span class="mobile-toggle__icon"></span>
    </button>
  </div>
</div>

<!-- Navigation JavaScript -->
<script>
(function() {
  'use strict';
  
  document.addEventListener('DOMContentLoaded', function() {
    const masthead = document.querySelector('.masthead');
    const menu = document.querySelector('.masthead__menu');
    const mobileToggle = document.querySelector('.mobile-toggle');
    const navLinks = document.querySelectorAll('.nav-link');
    const currentPath = window.location.pathname;
    
    // Mark active link
    navLinks.forEach(link => {
      const linkPath = link.getAttribute('href');
      if (currentPath === linkPath || (currentPath === '/' && linkPath === '/')) {
        link.classList.add('active');
      }
      
      // Close mobile menu on link click
      link.addEventListener('click', function() {
        if (window.innerWidth <= 768) {
          menu.classList.remove('show');
          mobileToggle.setAttribute('aria-expanded', 'false');
        }
      });
    });
    
    // Mobile menu toggle
    if (mobileToggle && menu) {
      mobileToggle.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
        menu.classList.toggle('show');
      });
    }
    
    // Scroll effect
    let lastScroll = 0;
    window.addEventListener('scroll', function() {
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > 50) {
        masthead.classList.add('scrolled');
      } else {
        masthead.classList.remove('scrolled');
      }
      
      lastScroll = currentScroll;
    });
    
  });
})();
</script>

<!-- Include Search Overlay -->
{% include search-overlay.html %}
