---
layout: default
---

<div class="tags-page-container">
  <!-- Tag Cloud (Compact Version) -->
  <section class="tags-page-cloud-section">
    {% include tag-cloud-compact.html id_prefix="tags" %}
  </section>

  <!-- Tag Details Section -->
  <div class="tag-details-container">
    {% for tag in sorted_tags %}
      {% assign tag_name = tag[0] %}
      {% assign tag_posts = tag[1] %}
      
      <section class="tag-detail-section" id="tag-{{ tag_name | slugify }}">
        <div class="tag-detail-header">
          <h2 class="tag-detail-title">
            <span class="tag-icon">🏷️</span>
            {{ tag_name }}
            <span class="tag-detail-count">({{ tag_posts | size }} 篇)</span>
          </h2>
        </div>
        
        <div class="tag-posts-grid">
          {% for post in tag_posts %}
            <article class="tag-post-card">
              {% if post.header.teaser %}
              <div class="post-card-image">
                <a href="{{ post.url | relative_url }}">
                  <img src="{{ post.header.teaser | relative_url }}" alt="{{ post.title }}">
                </a>
              </div>
              {% endif %}
              
              <div class="post-card-content">
                <h3 class="post-card-title">
                  <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                </h3>
                
                <div class="post-card-meta">
                  <time class="post-date" datetime="{{ post.date | date_to_xmlschema }}">
                    📅 {{ post.date | date: "%Y.%m.%d" }}
                  </time>
                  
                  {% if post.categories.size > 0 %}
                  <span class="post-category">
                    📁 {{ post.categories | first }}
                  </span>
                  {% endif %}
                </div>
                
                {% if post.excerpt %}
                <p class="post-card-excerpt">{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
                {% endif %}
              </div>
            </article>
          {% endfor %}
        </div>
      </section>
    {% endfor %}
  </div>
</div>

<!-- Smooth scroll to tag details -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Smooth scroll to tag section when clicking tag cloud items
  document.querySelectorAll('.tag-cloud-item-compact[data-group="tags"]').forEach(item => {
    item.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href && href.startsWith('#tag-')) {
        e.preventDefault();
        const targetId = href.substring(1);
        const targetElement = document.getElementById(targetId);
        
        if (targetElement) {
          targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
          
          // Highlight animation
          targetElement.classList.add('highlight-flash');
          setTimeout(() => {
            targetElement.classList.remove('highlight-flash');
          }, 2000);
        }
      }
    });
  });
});
</script>
