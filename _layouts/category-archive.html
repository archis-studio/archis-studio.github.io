---
layout: default
---

{% if site.categories[page.category] %}
  {% assign category_posts = site.categories[page.category] | where_exp: "post", "post.draft != true" | sort: "date" | reverse %}
{% else %}
  {% assign category_posts = "" | split: "" %}
{% endif %}

<div class="posts-archive">
  
  <!-- Archive Header -->
  <header class="archive-header">
    <div class="category-hero-compact">
      <span class="category-icon-large">{{ page.icon }}</span>
      <div class="category-info">
        <h1 class="archive-title">{{ page.title }}</h1>
        <p class="archive-subtitle">{{ page.subtitle }} · {{ category_posts.size }} 篇文章</p>
      </div>
    </div>
  </header>

  <!-- Posts Grid -->
  {% if category_posts.size > 0 %}
  <div class="posts-grid">
    {% for post in category_posts %}
      <article class="post-card">
        <!-- Post Image or Placeholder -->
        {% if post.header.teaser %}
        <div class="post-card__image">
          <a href="{{ post.url | relative_url }}">
            <img src="{{ post.header.teaser | relative_url }}" alt="{{ post.title }}">
          </a>
        </div>
        {% else %}
        <div class="post-card__placeholder">
          <a href="{{ post.url | relative_url }}" style="display: block; width: 100%; height: 100%;"></a>
        </div>
        {% endif %}

        <!-- Post Content -->
        <div class="post-card__content">
          <!-- Categories -->
          {% if post.categories.size > 0 %}
          <div class="post-card__categories">
            {% for category in post.categories %}
              <span class="category-tag">{{ category }}</span>
            {% endfor %}
          </div>
          {% endif %}

          <!-- Title -->
          <h2 class="post-card__title">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </h2>

          <!-- Excerpt -->
          {% if post.excerpt %}
          <p class="post-card__excerpt">{{ post.excerpt | strip_html | truncate: 120 }}</p>
          {% endif %}

          <!-- Meta Info -->
          <div class="post-card__meta">
            <time class="post-date" datetime="{{ post.date | date_to_xmlschema }}">
              {{ post.date | date: "%Y.%m.%d" }}
            </time>
            {% if post.tags.size > 0 %}
            <div class="post-tags">
              {% for tag in post.tags limit:3 %}
                <span class="tag">#{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-icon">🌌</div>
    <h3>此區域尚未開放</h3>
    <p>暫無文章，敬請期待未來更新</p>
    <a href="/categories/" class="back-link">← 返回分類導航</a>
  </div>
  {% endif %}

  <!-- Back to Categories Link -->
  <div class="archive-footer">
    <a href="/categories/" class="back-link">← 返回分類導航</a>
  </div>

</div>
